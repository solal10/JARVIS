"use strict";(()=>{var e={};e.id=159,e.ids=[159],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8043:(e,t,i)=>{i.r(t),i.d(t,{headerHooks:()=>b,originalPathname:()=>v,patchFetch:()=>S,requestAsyncStorage:()=>g,routeModule:()=>h,serverHooks:()=>y,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var n={};i.r(n),i.d(n,{GET:()=>d,POST:()=>u});var r=i(884),o=i(6132),s=i(1040),a=i(5798);async function u(){try{let e=new Date,t=e.getHours(),i=e.getDay(),n=c(t,i);if(!n.shouldPublish)return a.Z.json({success:!1,reason:`Horaire non optimal (${t}h). ${n.reason}`,nextOptimalTime:n.nextTime});let r=l(t),o=await fetch(`${process.env.BASE_URL||"http://localhost:3000"}/api/generate-article`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:r.topic,category:r.category,keywords:r.keywords,saveToSite:!0})}),s=await o.json();if(!s.success)throw Error(`Erreur g\xe9n\xe9ration article: ${s.error}`);return r.type,r.topic,s.article.title,s.wordCount,s.article.editorialIntelligence?.smartSelection?.seoScore,a.Z.json({success:!0,published:!0,strategy:r.type,article:{title:s.article.title,slug:s.article.slug,excerpt:s.article.excerpt,readTime:s.article.readTime,category:s.article.category},metrics:{wordCount:s.wordCount,seoScore:s.article.editorialIntelligence?.smartSelection?.seoScore||0,publishTime:n.timeSlot,estimatedTraffic:s.article.editorialIntelligence?.smartSelection?.estimatedTraffic||0},nextScheduled:p()})}catch(e){return a.Z.json({success:!1,error:"Erreur syst\xe8me publication automatique",details:e instanceof Error?e.message:"Erreur inconnue"},{status:500})}}function c(e,t){return 0===t||6===t?10===e||16===e?{shouldPublish:!0,reason:"Horaire weekend optimal",timeSlot:10===e?"weekend-morning":"weekend-afternoon"}:{shouldPublish:!1,reason:"Weekend : publication seulement \xe0 10h et 16h",nextTime:"Lundi 8h"}:8===e||18===e?{shouldPublish:!0,reason:"Horaire business optimal",timeSlot:8===e?"business-morning":"business-evening"}:12===e?{shouldPublish:!0,reason:"Horaire lunch break optimal",timeSlot:"lunch-time"}:{shouldPublish:!1,reason:"Horaire non optimal. Prochaines publications : 8h, 12h ou 18h",nextTime:e<8?"8h":e<12?"12h":e<18?"18h":"Demain 8h"}}function l(e){let t;let i={morning:{type:"Morning Insights",topics:["Tendances IA entreprise 2024","Startup europ\xe9enne lev\xe9es de fonds","Innovation blockchain France","Cybers\xe9curit\xe9 quantique industrielle","No-code transformation digitale","Intelligence artificielle audit conformit\xe9"],category:"Innovation",baseKeywords:["innovation","business","strat\xe9gie"]},lunch:{type:"Lunch Break Analysis",topics:["Guide pratique IA pour dirigeants","ROI transformation digitale mesurable","\xc9cosyst\xe8me startup Monaco tech","Conformit\xe9 RGPD intelligence artificielle","Investissements tech europ\xe9ens 2024","Formation \xe9quipes nouvelles technologies"],category:"Tech Business",baseKeywords:["guide","pratique","entreprise"]},evening:{type:"Evening Deep Dive",topics:["Analyse march\xe9 fintech europ\xe9en","Impact IA sur emploi France","R\xe9glementation tech Union europ\xe9enne","D\xe9veloppement durable technologies \xe9mergentes","S\xe9curit\xe9 donn\xe9es entreprises fran\xe7aises","Avenir travail intelligence artificielle"],category:"Analyse",baseKeywords:["analyse","march\xe9","tendances"]}};t=e<=10?i.morning:e>=11&&e<=14?i.lunch:i.evening;let n=t.topics[Math.floor(Math.random()*t.topics.length)];return{type:t.type,topic:n,category:t.category,keywords:[...t.baseKeywords,...function(e){let t=[];return(e.includes("IA")||e.includes("intelligence"))&&t.push("intelligence artificielle"),e.includes("startup")&&t.push("startup","financement"),e.includes("blockchain")&&t.push("blockchain","crypto"),e.includes("cybers\xe9curit\xe9")&&t.push("cybers\xe9curit\xe9","s\xe9curit\xe9"),(e.includes("France")||e.includes("europ\xe9en"))&&t.push("France","Europe"),t}(n)]}}function p(){let e=new Date,t=new Date(e);return(t.setDate(t.getDate()+1),8>e.getHours())?"Aujourd'hui 8h":18>e.getHours()?"Aujourd'hui 18h":"Demain 8h"}async function d(){let e=new Date,t=e.getHours(),i=e.getDay(),n=c(t,i),r=l(t);return a.Z.json({status:"active",currentTime:e.toISOString(),currentHour:t,day:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"][i],isOptimalTime:n.shouldPublish,reason:n.reason,nextPublication:p(),currentStrategy:{type:r.type,suggestedTopic:r.topic,category:r.category},schedule:{weekdays:["8h (Morning Insights)","12h (Lunch Analysis)","18h (Evening Deep Dive)"],weekend:["10h (Weekend Morning)","16h (Weekend Afternoon)"]}})}let h=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auto-publish/route",pathname:"/api/auto-publish",filename:"route",bundlePath:"app/api/auto-publish/route"},resolvedPagePath:"/Users/JARVIS/Desktop/JARVIS/frontend/src/app/api/auto-publish/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:y,headerHooks:b,staticGenerationBailout:f}=h,v="/api/auto-publish/route";function S(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[271,107],()=>i(8043));module.exports=n})();