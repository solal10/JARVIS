"use strict";(()=>{var e={};e.id=937,e.ids=[937],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},4896:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>S,originalPathname:()=>v,patchFetch:()=>j,requestAsyncStorage:()=>w,routeModule:()=>y,serverHooks:()=>f,staticGenerationAsyncStorage:()=>k,staticGenerationBailout:()=>b});var o={};r.r(o),r.d(o,{GET:()=>m,POST:()=>d});var n=r(884),i=r(6132),s=r(1040),a=r(5798),c=r(7147),l=r.n(c),u=r(1017),p=r.n(u);async function d(e){try{let t=e.headers.get("authorization"),r=process.env.N8N_WEBHOOK_SECRET||"jarvis-n8n-webhook-2024";if(!t||t!==`Bearer ${r}`)return a.Z.json({success:!1,error:"Token d'autorisation invalide"},{status:401});let o=await e.json(),n=["title","content","excerpt","category"].filter(e=>!o[e]);if(n.length>0)return a.Z.json({success:!1,error:`Champs manquants: ${n.join(", ")}`},{status:400});let i=o.slug||o.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").slice(0,50).replace(/^-|-$/g,""),s={slug:i,title:o.title,excerpt:o.excerpt,content:o.content,category:o.category,keywords:o.keywords||[],seo:{title:o.seo?.title||`${o.title} | JARVIS Monaco`,description:o.seo?.description||o.excerpt,keywords:o.seo?.keywords||o.keywords?.join(", ")||"",canonicalUrl:`https://jarvis-mc.com/blog/${i}`,ogTitle:o.seo?.title||o.title,ogDescription:o.seo?.description||o.excerpt,ogImage:"/images/jarvis-editorial-premium.jpg",twitterCard:"summary_large_image",twitterTitle:o.seo?.title||o.title,twitterDescription:o.seo?.description||o.excerpt,schema:{"@context":"https://schema.org","@type":"BlogPosting",headline:o.title,author:{"@type":"Person",name:o.author||"Thomas Benichou",jobTitle:"Directeur JARVIS Monaco",worksFor:{"@type":"Organization",name:"JARVIS"}},publisher:{"@type":"Organization",name:"JARVIS",logo:{"@type":"ImageObject",url:"https://jarvis-mc.com/logo.png"}},datePublished:new Date().toISOString(),dateModified:new Date().toISOString(),mainEntityOfPage:{"@type":"WebPage","@id":`https://jarvis-mc.com/blog/${i}`},articleSection:o.category,keywords:o.keywords,about:{"@type":"Thing",name:o.title},audience:{"@type":"Audience",audienceType:"business professionals, decision makers, tech leaders"}}},createdAt:new Date().toISOString(),publishedAt:new Date().toISOString(),author:o.author||"Thomas Benichou",readTime:function(e){let t=g(e);return Math.ceil(t/200)}(o.content),trending:!1,views:0,status:"published"};return await h(s),a.Z.json({success:!0,message:"Article publi\xe9 avec succ\xe8s",article:{slug:s.slug,title:s.title,excerpt:s.excerpt,category:s.category,readTime:s.readTime,publishedAt:s.publishedAt,url:`https://jarvis-mc.com/blog/${s.slug}`},metadata:{wordCount:g(o.content),keywords:s.keywords,seoScore:function(e){let t=0;e.title.length>=30&&e.title.length<=60?t+=25:e.title.length>=20&&(t+=15),e.seo.description.length>=120&&e.seo.description.length<=160?t+=25:e.seo.description.length>=80&&(t+=15),e.keywords.length>=3?t+=20:e.keywords.length>=1&&(t+=10);let r=g(e.content);return r>=800?t+=30:r>=500?t+=20:r>=300&&(t+=10),t}(s)}})}catch(e){return a.Z.json({success:!1,error:"Erreur interne du serveur",details:e instanceof Error?e.message:"Erreur inconnue"},{status:500})}}function g(e){let t=e.replace(/<[^>]*>/g,"");return t.split(/\s+/).filter(e=>e.length>0).length}async function h(e){let t=p().join(process.cwd(),"src/data/blog/articles.json");try{let r=[];if(l().existsSync(t)){let e=l().readFileSync(t,"utf8");r=JSON.parse(e)}let o=r.findIndex(t=>t.slug===e.slug);o>=0?r[o]={...r[o],...e}:r.unshift(e),l().writeFileSync(t,JSON.stringify(r,null,2))}catch(e){throw Error("Impossible de sauvegarder l'article")}}async function m(){return a.Z.json({status:"active",endpoint:"/api/n8n-webhook",method:"POST",authentication:"Bearer token required",timestamp:new Date().toISOString(),documentation:{required_headers:{Authorization:"Bearer YOUR_SECRET_TOKEN","Content-Type":"application/json"},required_fields:["title","content","excerpt","category"],optional_fields:["keywords","author","slug","seo"],example_payload:{title:"Innovation IA en France 2024",content:"<p>Contenu de l'article...</p>",excerpt:"R\xe9sum\xe9 de l'article",category:"Innovation",keywords:["IA","France","innovation"],author:"Thomas Benichou"}}})}let y=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/n8n-webhook/route",pathname:"/api/n8n-webhook",filename:"route",bundlePath:"app/api/n8n-webhook/route"},resolvedPagePath:"/Users/thomasbenichou/Desktop/JARVIS/frontend/src/app/api/n8n-webhook/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:w,staticGenerationAsyncStorage:k,serverHooks:f,headerHooks:S,staticGenerationBailout:b}=y,v="/api/n8n-webhook/route";function j(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:k})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[271,107],()=>r(4896));module.exports=o})();